clear; close all
%% load data
load('results_sumrate_bl(8, 100, 3)_10_-100_15_5.mat')
pilot_set = len_pilot_set;
rate_bs_set = rate_imperfectCSI;
rate_perfect_set = rate_perfectCSI*ones(1,length(pilot_set));

load('results_test_sumrate0.mat')
rate_nn_set = rate_sum;
pilot_set_nn = set_len_pilot;
% rate_nn_set(3) = [];
% pilot_set_nn(3) = [];

load('results_test_sumrate1.mat')
rate_nn_location = rate_sum;
pilot_set_location = set_len_pilot;

load('bcd_perfect_csi_(8, 100, 3)_10_5.mat')
rate_random_irs = rate_w(1);
rate_random_irs = rate_random_irs*ones(1,length(pilot_set));

load 'results_sumrate_dnnce(8, 100, 3)_10_-100.mat'
pilot_set_dnnce = len_pilot_set;
rate_dnnce = rate_imperfectCSI;

%% plot
blue = [0.00,0.45,0.74];
orange = [0.85,0.33,0.10];
yellow = [0.93,0.69,0.13];
purple = [0.49,0.18,0.56];
red = [0.64,0.08,0.18];
black = [0.15,0.15,0.15];
plot(pilot_set,rate_perfect_set,...
    'v-','LineWidth',1.5,...
    'Color',yellow,....
    'MarkerSize',7,...
    'MarkerFaceColor',yellow)
hold on
plot(pilot_set,rate_bs_set,...
    's-','LineWidth',1.5,...
    'Color',blue,....
    'MarkerSize',8,...
    'MarkerFaceColor',blue)
hold on
plot(pilot_set_nn,rate_nn_set,...
    'o-','LineWidth',1.5,...
    'Color',orange,....
    'MarkerSize',6.7,...
    'MarkerFaceColor',orange)
hold on
plot(set_len_pilot,rate_nn_location,...
    '<-','LineWidth',1.5,...
    'Color',purple,....
    'MarkerSize',6.7,...
    'MarkerFaceColor',purple)
hold on
plot(pilot_set,rate_random_irs,...
    '^-','LineWidth',1.5,...
    'Color',red,....
    'MarkerSize',6.7,...
    'MarkerFaceColor',red)
hold on
plot(pilot_set_dnnce,rate_dnnce,...
    'p-','LineWidth',1.5,...
    'Color',black,....
    'MarkerSize',6.7,...
    'MarkerFaceColor',black)
grid on
legend('Perfect CSI+BCD','LMMSE channel estimation+BCD','Deep learning (without location information)',...
    'Deep learning (with location information)',...
    'Perfect CSI+random phase shifts','Deep learning channel estimation+BCD','Location', 'southeast','Interpreter','latex')
xlabel('Pilot length','Interpreter','latex')
ylabel('Sum rate [bps/Hz]','Interpreter','latex')
grid on



% %%
% figure;
% plot(test_loss(1:end-1,:)','LineWidth',2)
% % for ii =1:length(pilot_set)
% %     tmp = ['Pilot length = ',num2str(pilot_set(ii))]
% %     print(tmp)
% % end
% legend( 'Pilot length = 18', 'Pilot length = 30', 'Pilot length = 42', 'Pilot length = 54', 'Pilot length = 66', 'Pilot length = 78',...
%      'Pilot length = 90', 'Pilot length = 180', 'Pilot length = 270',...
%      'Pilot length = 360','Location','southeast','Fontsize',6.8,'Interpreter','latex')
% xlabel('Training epochs','Interpreter','latex')
% ylabel('Testing sum rate [bps/Hz]','Interpreter','latex')
% grid on
 